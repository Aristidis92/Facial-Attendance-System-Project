{% extends 'base.html' %}
{% block content %}
<h2>User Management</h2>

<table border="1" cellpadding="8">
  <thead>
    <tr>
      <th>Username</th>
      <th>Email</th>
      <th>Role</th>
      <th>Date Joined</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
      <tr>
        <td>{{ user.username }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.role }}</td>
        <td>{{ user.date_joined|date:"Y-m-d H:i" }}</td>
        <td>
            {% if request.user.role == 'admin' %}
            <a href="{% url 'edit_user' user.id %}">Edit</a>
            <a href="{% url 'delete_user' user.id %}">Delete</a>

          {% endif %}
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="5">No users found.</td></tr>
    {% endfor %}
  </tbody>
</table>

<div style="margin-top: 20px;">
  <span>Page {{ users.number }} of {{ users.paginator.num_pages }}</span><br>

  {% if users.has_previous %}
    <a href="?page={{ users.previous_page_number }}">Previous</a>
  {% endif %}

  {% if users.has_next %}
    <a href="?page={{ users.next_page_number }}">Next</a>
  {% endif %}
</div>

{% endblock %}
